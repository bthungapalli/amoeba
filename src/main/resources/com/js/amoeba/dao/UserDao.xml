<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.js.amoeba.dao.UserDao">

	<select id="getUserDetailsByUserName" resultType="com.js.amoeba.domain.User"
		parameterType="String">
		SELECT *  from users where email =#{email}
	</select>
	
	<insert id="saveUser" parameterType="com.js.amoeba.domain.User">
		INSERT INTO
		users(email,
		password,role,firstName , lastName,phone,address,gender,createdAt)
		VALUES
		(#{email},#{password},#{role},#{firstName},#{lastName},#{phone},#{address},#{gender},Now())
	</insert>
	
	<!-- <select id="validateEmail" resultType="int" parameterType="String">
		SELECT count(email) FROM user where email=#{emailId}
	</select>
	<update id="updateUser" parameterType="com.js.amoeba.domain.User">

	UPDATE user SET
	firstName= #{firstName},lastName = #{lastName},phone=#{phone},
	address=#{address},gender=#{gender}
	WHERE userid=#{id}

	</update> -->
	
	<update id="deActivateUser" parameterType="String">
		update users set
		verification = 0 where email=#{email}
	</update>

	<update id="activateUser" parameterType="String">
		update users set
		verification = 1 where email=#{email}
	</update>
	
	<update id="updateToken" parameterType="com.js.amoeba.domain.VerifyToken">
		update users set token=#{token} ,expiryDate=#{expiryDate},confirmed=#{user.confirmed} where email=#{user.email}
	</update>
	</mapper>
	